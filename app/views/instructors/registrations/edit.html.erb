<%= provide(:title, "Your Settings") %>

<div class="wrapper">
  <div class="container">
    <div class="form-container padding-vertical">

      <div class="padding-bottom center mid-text border-bottom">
        Settings
      </div>

      <div class="padding-top">
        <%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %>
          <%= devise_error_messages! %>

          <div class="field">
            <%= f.label :username %><span class="dark mini-text"> This will also change your URL.</span>
            <%= f.text_field :username, class: "text-field" %>
          </div>
          <div class="field">
            <%= f.label :email %>
            <%= f.email_field :email, autocomplete: "email", class: "text-field" %>
          </div>

          <div class="padding-vertical center mid-text border-bottom border-top">
            Receive emails for:
          </div>

          <div class="flex padding-top">
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="first-email-tab" for="first-email-inactive">Purchases</label>
              <span class="hidden"><%= f.check_box :purchase_email, id: "first-email-inactive" %></span>
            </div>
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="second-email-tab" for="second-email-inactive">Refunds</label>
              <span class="hidden"><%= f.check_box :refund_email, id: "second-email-inactive" %></span>
            </div>
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="third-email-tab" for="third-email-inactive">Subscriptions</label>
              <span class="hidden"><%= f.check_box :subscription_email, id: "third-email-inactive" %></span>
            </div>
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="fourth-email-tab" for="fourth-email-inactive">Reviews</label>
              <span class="hidden"><%= f.check_box :review_email, id: "fourth-email-inactive" %></span>
            </div>
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="fifth-email-tab" for="fifth-email-inactive">Comments</label>
              <span class="hidden"><%= f.check_box :comment_email, id: "fifth-email-inactive" %></span>
            </div>
            <div class="field-three-column">
              <label class="inactive-paid-tab" id="sixth-email-tab" for="sixth-email-inactive">Messages</label>
              <span class="hidden"><%= f.check_box :message_email, id: "sixth-email-inactive" %></span>
            </div>
          </div>

          <div class="field">
            <%= f.label :password %> <span class="dark mini-text"><%= @minimum_password_length.to_s + " characters minimum." if @minimum_password_length %> Leave blank if you don't want to change it</span>
            <%= f.password_field :password, autocomplete: "off", class: "text-field" %>
          </div>

          <div class="field">
            <%= f.label :current_password %> <span class="dark mini-text">Your current password confirms your changes.</span>
            <%= f.password_field :current_password, autocomplete: "off", class: "text-field" %>
          </div>

          <div class="border-bottom padding-bottom">
            <%= f.submit "Update", class: "submit-button" %>
          </div>
        <% end %>
      </div>


      <% unless resource.subscriptions.any? || resource.purchases.any? %>
        <div class="margin-top-huge padding-vertical center mid-text border-bottom border-top">
          Want to delete your account?
        </div>

        <div class="padding-vertical">
          You will not be able to get your account back. You will not be able to access your courses or subscriptions. All course purchases and subscriptions will be terminated upon deleting your account. It is recommended to keep your account open to view purchases.
        </div>

        <div class="border-bottom padding-bottom">
          <%= button_to "Delete my account", registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: "removal-button" %>
        </div>
      <% end %>

    </div>
  </div>
</div>
